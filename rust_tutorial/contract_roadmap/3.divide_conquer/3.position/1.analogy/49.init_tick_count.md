目标：
1. 理解initialized_tick_count的作用？


内容：
1. 作用

#[account(zero_copy(unsafe))]
#[repr(C, packed)]
pub struct TickArrayState {
    pub pool_id: Pubkey,
    pub start_tick_index: i32,
    pub ticks: [TickState; TICK_ARRAY_SIZE_USIZE],
    pub initialized_tick_count: u8,
    // account update recent epoch
    pub recent_epoch: u64,
    // Unused bytes for future upgrades.
    pub padding: [u8; 107],
}

initialized_tick_count: Number of ticks in ticks that are currently initialized (liquidity_gross > 0). Used to decide when to flip the pool’s tickarray bitmap bit (0 ↔ 1).


Does it mean the number of initialized ticks in an tickarray?
    Yes. It’s the count of initialized ticks within that `TickArrayState` (ticks with non-zero liquidity_gross). It’s used to detect 0 ↔ 1 transitions to flip the pool’s tick-array bitmap.

2. How is it updated?

flipped_upper = tick_upper_state.update(
            pool_state.tick_current,
            liquidity_delta,
            pool_state.fee_growth_global_0_x64,
            pool_state.fee_growth_global_1_x64,
            true,
            &updated_reward_infos,
        )?;
msg!("flipped_upper: {}", flipped_upper);

if flip_tick_upper { // flip_tick_upper is true, then it means there is another new tick initialized in the context of "modifying position price range"
        let mut tick_array_upper = tick_array_upper_loader.load_mut()?;
        let before_init_tick_count = tick_array_upper.initialized_tick_count;
        tick_array_upper.update_initialized_tick_count(true)?;
        if before_init_tick_count == 0 {
            pool_state.flip_tick_array_bit(
                tick_array_bitmap_extension,
                tick_array_upper.start_tick_index,
            )?;
        }
    }