## Roadmap

- **Phase 0 · Baseline Setup**
  - Confirm `Anchor.toml`, `lib.rs`, and `tests` scaffold compile by running `anchor build` and `anchor test`.
  - Add a high-level module structure (e.g., `state::`, `instructions::`, `errors::`, `events::`) in `programs/fun-uniswap-v3/src`.

- **Phase 1 · AmmConfig**
  - Design `AmmConfig` account state struct and associated PDA seeds.
  - Implement `initialize_amm_config` instruction; expose parameters for fee tiers, tick spacing, protocol fees.
  - Write Anchor handler plus initialization constraints/validation.
  - Add unit tests (Rust + TypeScript integration if needed) covering happy path, duplicate init, invalid params.

- **Phase 2 · Pool Lifecycle**
  - Define `PoolState` account tying together `AmmConfig`, token mints, vaults, observation arrays.
  - Implement `create_pool` instruction handling vault setup, tick arrays, protocol authority.
  - Add per-instruction events and custom errors (e.g., mismatched mint decimals).
  - Extend tests for pool creation, including edge cases: mismatched configs, double init, authority checks.

- **Phase 3 · Liquidity Positions**
  - Model `Position` account (owner, lower/upper tick indexes, liquidity).
  - Implement `open_position` instruction (optionally `increase_liquidity` / `decrease_liquidity`).
  - Add tick array management logic (initialization, bitmap updates); consider factoring into helper modules.
  - Cover tests for opening positions in/ out of range, liquidity accounting invariants.

- **Phase 4 · Swaps**
  - Introduce swap instruction supporting single-hop within a pool.
  - Implement tick stepping, fee growth tracking, oracle update.
  - Share math utilities (sqrt price, liquidity delta) in a dedicated module to stay testable.
  - Build tests for exact-in/exact-out swaps, price boundary conditions, fee accrual.

- **Phase 5 · Fees & Rewards**
  - Implement fee claim instruction for positions; update protocol fee vault handling.
  - Add reward distribution hooks if desired (Raydium staking analog).

- **Phase 6 · Observability & Maintenance**
  - Add events covering config changes, swaps, liquidity adjustments.
  - Provide admin instructions for config updates, whitelist toggles, emergency pause.

- **Testing Milestones**
  - For each phase, pair Rust unit tests (state/math correctness) with TypeScript integration tests under `tests/`.
  - Utilize Anchor’s `#[cfg(test)]` modules for math helpers; mock context for instruction tests using `solana_program_test`.
  - Document test matrix in `contract_roadmap/.../readme.md`; keep fixtures and constants centralized.

- **Documentation & Tooling**
  - Maintain a stepped tutorial in `1.anchor_tutorial/readme.md` summarizing goals and commands.
  - Update `error_logs/...` with troubleshooting notes after each milestone.
  - Consider scripts for test fixtures or localnet deployments to ease verification.

Next step: lock in the module skeleton and AmmConfig design before coding handlers. Let me know when you’re ready to start Phase 1 and we can draft the account layout plus first instruction signature.





基于项目roadmap,帮住我完善Phase 1 · AmmConfig 任务，让每个目标可执行，并提供明确的执行步骤。 
并将内容输出到文档中。 
文档存储路径：rust_tutorial/contract_roadmap/6.implementation/project_management
文档名称：基于任务要求总结出一个概括性的名称
文档内容：任务目标 + 执行步骤 + 任务完整标准
内容格式：[以markdown格式输出，同时确保可读性] 
格式如下：
1：任务目标：【列出当前任务目标，以及该子目标在最终目标（实现整个项目）中的作用】
2：执行步骤：[列出为实现该子任务目标，我需要做的事情]
step1: ...
step2: ...
step3: ...
等等
3: 任务完成标准：【列出任务完成检验标准】

最后执行 git add 改动文件； git commit -m 错误总结 ; git push  推送到远程仓库